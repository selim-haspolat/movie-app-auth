import axios from "axios";
import React, { useEffect, useState } from "react";
import Header from "../components/Header";
import MovieCard from "../components/MovieCard";

const Home = () => {
  const [movies, setMovies] = useState([]);
  const [movieName, setMovieName] = useState("");

  const apiKey = process.env.REACT_APP_MOVIE_API_KEY;

  const getMovie = async () => {
    const { data } = await axios(
      `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${movieName}`
    );
    setMovies(data.results);
  };

  const getPopuler = async () => {
    const { data } = await axios(
      `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}`
    );
    setMovies(data.results);
  };

  useEffect(() => {
    movieName && getMovie();
  }, [movieName]);

  useEffect(() => {
    getPopuler();
  }, []);

  return (
    <div className="mt-[64px]">
      <svg
        id="main-blob"
        width="100%"
        height="100%"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        version="1.1"
      >
        <defs>
          <linearGradient id="grad1_0" x1="33.3%" y1="0%" x2="100%" y2="100%">
            <stop offset="20%" stopColor="transparent" stopOpacity={1} />
            <stop offset="80%" stopColor="transparent" stopOpacity={1} />
          </linearGradient>
        </defs>
        <defs>
          <linearGradient id="grad2_0" x1="0%" y1="0%" x2="66.7%" y2="100%">
            <stop offset="20%" stopColor="transparent" stopOpacity={1} />
            <stop offset="80%" stopColor="transparent" stopOpacity={1} />
          </linearGradient>
        </defs>
        <g className="translate-x-[150vw] sm:translate-x-[130vw] md:translate-x-[100vw]">
          <path
            fill="#FBAE3C"
          >
            <animate attributeName='d' dur='15000ms'
            repeatCount='indefinite' values="M0 486.7C-44.8 438.4 -89.5 390.1 -155.4 375.1C-221.2 360 -308.1 378.3 -344.2 344.2C-380.2 310.1 -365.4 223.7 -380.6 157.7C-395.9 91.6 -441.3 45.8 -486.7 0L0 0Z;
            M0 486.7C-44.8 436 -89.6 385.3 -153.1 369.6C-216.5 353.8 -298.6 373.1 -344.2 344.2C-389.8 315.2 -399 238 -416.7 172.6C-434.4 107.2 -460.6 53.6 -486.7 0L0 0Z;
            M0 486.7C-63.6 479.6 -127.2 472.5 -186.3 449.7C-245.3 426.9 -299.8 388.3 -340.8 340.8C-381.8 293.4 -409.4 237 -431.5 178.7C-453.5 120.4 -470.1 60.2 -486.7 0L0 0Z;
            M0 486.7C-53.3 451.1 -106.6 415.4 -162.6 392.6C-218.6 369.9 -277.3 360.1 -328.8 328.8C-380.3 297.5 -424.6 244.7 -449.7 186.3C-474.8 127.9 -480.8 63.9 -486.7 0L0 0Z;
            M0 486.7C-71.3 486.1 -142.5 485.5 -185.2 447.2C-227.9 408.8 -242 332.7 -287.8 287.8C-333.6 242.9 -411.2 229 -449.7 186.3C-488.2 143.5 -487.5 71.7 -486.7 0L0 0Z;
            M0 486.7C-69.1 478.4 -138.2 470.1 -177.9 429.6C-217.7 389.1 -228.1 316.3 -275.8 275.8C-323.4 235.2 -408.3 226.9 -449.7 186.3C-491.1 145.7 -488.9 72.8 -486.7 0L0 0Z;
            M0 486.7C-50.3 447.3 -100.5 407.8 -161.5 389.9C-222.5 371.9 -294.2 375.5 -344.2 344.2C-394.2 312.8 -422.4 246.5 -442.5 183.3C-462.7 120.1 -474.7 60.1 -486.7 0L0 0Z;
            M0 486.7C-44.8 438.4 -89.5 390.1 -155.4 375.1C-221.2 360 -308.1 378.3 -344.2 344.2C-380.2 310.1 -365.4 223.7 -380.6 157.7C-395.9 91.6 -441.3 45.8 -486.7 0L0 0Z;
            ">
            </animate>
          </path>
        </g>
        <g className="translate-y-[600px] translate-x-[-50vw] sm:translate-x-[-30vw] md:translate-x-[0]">
        <path
            fill="#FBAE3C"
          >
            <animate attributeName='d' dur='15000ms' 
            repeatCount='indefinite' values="M0 -486.7C48.8 -448.7 97.5 -410.7 163.4 -394.5C229.3 -378.3 312.2 -384 344.2 -344.2C376.1 -304.4 357.1 -219.2 372.3 -154.2C387.6 -89.3 437.2 -44.6 486.7 0L0 0Z;
            M0 -486.7C56.1 -461.2 112.1 -435.6 172.2 -415.7C232.3 -395.9 296.4 -381.8 344.2 -344.2C391.9 -306.5 423.4 -245.4 444.4 -184.1C465.4 -122.8 476.1 -61.4 486.7 0L0 0Z;
            M0 -486.7C69.8 -486.2 139.6 -485.6 186.3 -449.7C233 -413.8 256.6 -342.6 293.4 -293.4C330.3 -244.3 380.4 -217.1 414.8 -171.8C449.2 -126.6 468 -63.3 486.7 0L0 0Z;
            M0 -486.7C66.3 -482.9 132.5 -479 186.3 -449.7C240 -420.4 281.3 -365.7 315.4 -315.4C349.5 -265 376.4 -219.1 403.7 -167.2C431.1 -115.4 458.9 -57.7 486.7 0L0 0Z;
            M0 -486.7C71.3 -488 142.6 -489.3 186.3 -449.7C229.9 -410.1 245.9 -329.5 278.6 -278.6C311.3 -227.7 360.7 -206.4 398.2 -164.9C435.7 -123.4 461.2 -61.7 486.7 0L0 0Z;
            M0 -486.7C53.3 -445.8 106.5 -404.8 155.8 -376C205 -347.2 250.1 -330.5 303.3 -303.3C356.6 -276.2 417.8 -238.6 449.7 -186.3C481.6 -134 484.2 -67 486.7 0L0 0Z;
            M0 -486.7C73.1 -489.1 146.3 -491.4 186.3 -449.7C226.3 -408 233.1 -322.1 275.1 -275.1C317 -228 394 -219.6 435.1 -180.2C476.3 -140.9 481.5 -70.4 486.7 0L0 0Z;
            M0 -486.7C48.8 -448.7 97.5 -410.7 163.4 -394.5C229.3 -378.3 312.2 -384 344.2 -344.2C376.1 -304.4 357.1 -219.2 372.3 -154.2C387.6 -89.3 437.2 -44.6 486.7 0L0 0Z;
            ">
            </animate>
          </path>
        </g>
      </svg>
      <svg
        id="main-blob"
        width="100%"
        height="100%"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        version="1.1"
      >
        <defs>
          <linearGradient id="grad1_0" x1="33.3%" y1="0%" x2="100%" y2="100%">
            <stop offset="20%" stopColor="transparent" stopOpacity={1} />
            <stop offset="80%" stopColor="transparent" stopOpacity={1} />
          </linearGradient>
        </defs>
        <defs>
          <linearGradient id="grad2_0" x1="0%" y1="0%" x2="66.7%" y2="100%">
            <stop offset="20%" stopColor="transparent" stopOpacity={1} />
            <stop offset="80%" stopColor="transparent" stopOpacity={1} />
          </linearGradient>
        </defs>
        <g className=" translate-x-[130vw] sm:translate-x-[110vw] md:translate-x-[100vw]  translate-y-[1200px] scale-x-[1]  scale-y-[-1]">
          <path
            fill="#FBAE3C"
          >
            <animate attributeName='d' dur='15000ms'
            repeatCount='indefinite' values="M0 486.7C-44.8 438.4 -89.5 390.1 -155.4 375.1C-221.2 360 -308.1 378.3 -344.2 344.2C-380.2 310.1 -365.4 223.7 -380.6 157.7C-395.9 91.6 -441.3 45.8 -486.7 0L0 0Z;
            M0 486.7C-44.8 436 -89.6 385.3 -153.1 369.6C-216.5 353.8 -298.6 373.1 -344.2 344.2C-389.8 315.2 -399 238 -416.7 172.6C-434.4 107.2 -460.6 53.6 -486.7 0L0 0Z;
            M0 486.7C-63.6 479.6 -127.2 472.5 -186.3 449.7C-245.3 426.9 -299.8 388.3 -340.8 340.8C-381.8 293.4 -409.4 237 -431.5 178.7C-453.5 120.4 -470.1 60.2 -486.7 0L0 0Z;
            M0 486.7C-53.3 451.1 -106.6 415.4 -162.6 392.6C-218.6 369.9 -277.3 360.1 -328.8 328.8C-380.3 297.5 -424.6 244.7 -449.7 186.3C-474.8 127.9 -480.8 63.9 -486.7 0L0 0Z;
            M0 486.7C-71.3 486.1 -142.5 485.5 -185.2 447.2C-227.9 408.8 -242 332.7 -287.8 287.8C-333.6 242.9 -411.2 229 -449.7 186.3C-488.2 143.5 -487.5 71.7 -486.7 0L0 0Z;
            M0 486.7C-69.1 478.4 -138.2 470.1 -177.9 429.6C-217.7 389.1 -228.1 316.3 -275.8 275.8C-323.4 235.2 -408.3 226.9 -449.7 186.3C-491.1 145.7 -488.9 72.8 -486.7 0L0 0Z;
            M0 486.7C-50.3 447.3 -100.5 407.8 -161.5 389.9C-222.5 371.9 -294.2 375.5 -344.2 344.2C-394.2 312.8 -422.4 246.5 -442.5 183.3C-462.7 120.1 -474.7 60.1 -486.7 0L0 0Z;
            M0 486.7C-44.8 438.4 -89.5 390.1 -155.4 375.1C-221.2 360 -308.1 378.3 -344.2 344.2C-380.2 310.1 -365.4 223.7 -380.6 157.7C-395.9 91.6 -441.3 45.8 -486.7 0L0 0Z;
            ">
            </animate>
          </path>
        </g>
        <g className="translate-y-[600px] scale-x-[1]  scale-y-[-1] translate-x-[-50vw] sm:translate-x-[-30vw] md:translate-x-[0]">
        <path
            fill="#FBAE3C"
          >
            <animate attributeName='d' dur='15000ms' 
            repeatCount='indefinite' values="M0 -486.7C48.8 -448.7 97.5 -410.7 163.4 -394.5C229.3 -378.3 312.2 -384 344.2 -344.2C376.1 -304.4 357.1 -219.2 372.3 -154.2C387.6 -89.3 437.2 -44.6 486.7 0L0 0Z;
            M0 -486.7C56.1 -461.2 112.1 -435.6 172.2 -415.7C232.3 -395.9 296.4 -381.8 344.2 -344.2C391.9 -306.5 423.4 -245.4 444.4 -184.1C465.4 -122.8 476.1 -61.4 486.7 0L0 0Z;
            M0 -486.7C69.8 -486.2 139.6 -485.6 186.3 -449.7C233 -413.8 256.6 -342.6 293.4 -293.4C330.3 -244.3 380.4 -217.1 414.8 -171.8C449.2 -126.6 468 -63.3 486.7 0L0 0Z;
            M0 -486.7C66.3 -482.9 132.5 -479 186.3 -449.7C240 -420.4 281.3 -365.7 315.4 -315.4C349.5 -265 376.4 -219.1 403.7 -167.2C431.1 -115.4 458.9 -57.7 486.7 0L0 0Z;
            M0 -486.7C71.3 -488 142.6 -489.3 186.3 -449.7C229.9 -410.1 245.9 -329.5 278.6 -278.6C311.3 -227.7 360.7 -206.4 398.2 -164.9C435.7 -123.4 461.2 -61.7 486.7 0L0 0Z;
            M0 -486.7C53.3 -445.8 106.5 -404.8 155.8 -376C205 -347.2 250.1 -330.5 303.3 -303.3C356.6 -276.2 417.8 -238.6 449.7 -186.3C481.6 -134 484.2 -67 486.7 0L0 0Z;
            M0 -486.7C73.1 -489.1 146.3 -491.4 186.3 -449.7C226.3 -408 233.1 -322.1 275.1 -275.1C317 -228 394 -219.6 435.1 -180.2C476.3 -140.9 481.5 -70.4 486.7 0L0 0Z;
            M0 -486.7C48.8 -448.7 97.5 -410.7 163.4 -394.5C229.3 -378.3 312.2 -384 344.2 -344.2C376.1 -304.4 357.1 -219.2 372.3 -154.2C387.6 -89.3 437.2 -44.6 486.7 0L0 0Z;
            ">
            </animate>
          </path>
        </g>
      </svg>
      <Header setMovieName={setMovieName} />
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-7 mt-5 border-t border-slate-400 pt-5 ">
        {movies.map((m) => (
          <MovieCard key={m.id} {...m} />
        ))}
      </div>
    </div>
  );
};

export default Home;
